---
layout: post
title:      "LifeRoute, Goal and habit tracker"
date:       2020-12-14 00:33:07 +0000
permalink:  liferoute_goal_and_habit_tracker
---


"Anyone who has never made a mistake has never tried anything new." - **Albert Einstein** 

Another challenging project. Though at times it was a struggle,  I was determined to stay calm and focused. Not getting caught up in mistakes, or changes of mind. In this project, I even implemented a new Gem at the end of my build and had to  completely re-write my view files. But hey, I learned how to use a brand new Gem that ended up being a lot of fun to use and that's something I can now use in future projects. 

Mistakes are inevitable. This rings true in many areas of life, not just coding.  Learning new coding languages can be hard. I think the trick is to keep your focus on the bigger picture and stay strict to the belief that mistakes are an avenue to learning. 
It can be easy to get frustrated, but  if you can use mistakes to your advantage and keep a clear head you might just see an increase in productivity. 

**Planning** 

As soon as I read the requirements for the project, I knew what I wanted to create. 
For a few months, a lot of my interest (and bookshelf) has been focused on habits and how important they are if you want to optimize productivity. 

LifeRoute (Shout-out to my wife for the name idea) Is an app to keep track of this. As a user, you can create Goals. Now that you have goals, you need to build your road to achieve them. That's where routines and habits come in. Routines are filled with habits, and with each one you fill out key information. 
Stating things like where, when, and specific time commitments makes you much more likely to follow through with the action, and build a real habit over time. 

Example  -  You have some goals. Read every day for a year, practice meditation consistently, and learning a new language. You could make a morning routine, with the habits "read for 20 minutes", "meditate for 15 minutes", and "learn 10 new words". 

**Flow chart**

Here is a link to my flow chart, it gives you an overview of the model relationships:

https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=Sinatra_project.drawio#R7Vvbdto6EP0aHunyHXgMufX05HSlTW%2FnqUtgxVYjLNcSBfr1lWzJNzk2NCEG2iesYSzbe7a2RmN5YJ8v1tcJiMP%2FiA%2FxwDL89cC%2BGFiWORrZ%2FEdYNtIyNsaZJUiQL22F4Q79hNJoSOsS%2BZBWHBkhmKG4apyTKIJzVrGBJCGrqts9wdWrxiCAmuFuDrBu%2FYx8FmbWsTUq7K8hCkJ1ZdObZP8sgHKWT0JD4JNVyWRfDuzzhBCWHS3W5xAL9BQun%2F%2FZfMY3D971m3f0O%2Fg4%2FffD20%2FDrLOrXU7JHyGBEfvtrt9eMYe%2BubTYcDS6uCTQeBuQoetlff8AeCkBu0cYU25KyJKhCPKjFeJIWEYIZohRiQXbKIBh5J%2BJOPHWHANK0XxgTykDCdPNIVtgbjD5IVwj9qV0%2FD8%2FNl6ZE0e2LwQFDdXYlBq3MEELyGAibVuiI1GkZJnMYQskjmQG9CvEkqBeQ8KvnWxSWHI6uZIiYYlJypZADBj6UaUjkKwO8u7yK9wSxJ%2FDMuQQtBX95AB0PKPaRfZA8qxy%2FGsduZNqR7ZT64iHLIBM64hHEWxKbrFwoI%2FfsOfVbnhS4SU%2FyHpUrRKmhSnl7g48tsc6L3n87mSTJCwkAYkAviysU87wyIe%2BpFHhc0NILJn5DTK2kaIGlozUOBzxu%2F6SEtcYqXZGZEc1Cx6nrU259XxM%2Fvlwf%2FX6k%2FPtS3x79W5lXJ%2FN3gyHpmRyFtg29JwtKb81l0vRbg1m632XROl1s%2FbQFVpgEIlg3pOIqXALLAFGQSTEh2MpAJ7%2BgAlDfF44k38wEeTpPETYvwEbLnbcxmVr%2FqBa05Ak6CfvFqh4p6om2WB5FY87caa8dAIp97lVYTRz0w2gTPrMCcYgpmiW3rBwWfAooWhKGCML1VGFoPn8kzZYQh7yGc3cmTwCDbhuDbbSDTXhqwxACVJJ%2F0yvQQC5tVPs3vMpH0QBhqXruVX9MJ1tr1e7HMA88BFgcCpgpBotd5OdRqZatsZUjaMYpfwsyYYeO0VWDO9ZA1UXyPdTxaIxmKMo%2BJDq09AsLDfpiRd2YXkvgbFTHjHAwCwfGxjMIL4lFDFERP9J5juV0s5v250O3IvUkrBzEvE7BiilFeQUXkFB4wbCtY%2FmbsZtqoHsCvj46frTKIeWq0U1AguoRZY%2FDqtGtlN08kimglAKiQ69mG5opjXNw%2FuZ0Fbi3zm8jH3Breegq3Bzomi7vaOtT66rEEYnCveod7jHTXAnpyomk97xnmh4YxgFYgF7koCbZt%2BIq3SthLgsHXzl550o6r1Pmq6lob6kMDlhyHufOR09t3%2BBGoMO6JNqAhKczpKAKVc2L18SaLwdrxfs8%2FrO0HhluOUCDzdYB1Dh2TaaKgs5kAKPPmN85NqlRfiR6o71t7rzfNWd%2FD2Nkllj22pLm84%2BXt2x7OOp7jgaTTWK%2FunFHWNrvh1IbcfTtedoajs7g91%2FlqoXG%2BACIHyacPeeoeprghhQuiLJcSwKdga89%2BqOXrkMAf26AJG4yYF9pl6Ze2Ah0pFoRuMUDg8L8Gc85fGCNAyVswIC8M4nyTU3P%2B9cZIQhbwcck7PqjdRzaIxRTGGWfsTCOMdkyZ94ugoRg3d8thHGVQLip6xKtk9Hhp5bSQ%2BGIz09aHzbbtr7irHt6bAd3bJPPkP3m2AJ%2F4Es%2Bxy7D%2BxLr%2FU9YzKovNcXmvOi677W1XlnPB3zoOJp6u9Ls%2ByrS%2Bt8CPw01%2B70TF8daVLJV1Z6n8sEpDmy9s9jlbQOUQQ0znaw3aO14N8eVbK6iMoXceWJ0GlSyfqen%2BeLrL5Yum6exmqYVkfrgUw75mSiA9o07dj7GilqOutN%2BVy3KnwTd%2F%2B61yln3nOrWfMWNq0oYk9eGe54bNmuNXFMVbzu2IH3bHvb9KHFV%2FgkCuhXHr80vROCRXUdq7sVOeKh54H1zYr5eOjMA9295YH6rpCunDxP%2F1u9ZPCOOm2vDRjHs%2FVwNa3M9hculfl0j5qDB7e%2BBThvl9G1G6f7lh14T6rg6wvf949py989mi9QxR%2FXx9%2BWZVbTcTonx4Yqvlmr4tvjhgT0QKr4%2BoYQjaJ%2FehXf25pvB1LFt%2FVK59FU8XcGu%2FcqvnO8GzR3Brv3Gr6jvzIpChWniHj%2FRXw9U1Qpu0hYKpB735dE%2FTHMwBGpumnE6%2BJPlebnib8ycJnm8wrGpcUav%2BOZ5p8vFM7iGPPoieAX5%2BpuYvcEbXNISzFtDtn3NW0eKr9r87mDlPJbbfUpPXiGrjIfaq0t%2F06ubSlqNRF2f4zdYmfCb36WuRuMh%2FKNpFtPf3%2FzG0nbfGSl1fGNZHeuypvFl8KZe%2FHBtX35Cw%3D%3D

Once it was all in one spot in front of me,  I was ready to start making it real. 

**Diving in**  

I built LifeRoute with Ruby. Specifically, Sinatra and ActiveRecord. It was using RESTful routes, and the MVC framework as per requirements.
Some other notable Gems include 'bcrypt', 'corneal', 'sinatra-flash', and 'tux'.
Using these Gem's I had access to more than enough tools, REST basically means you are creating routes according to a predefined framework. This gives you an outline for what your routes and names need be, and what they need to do, And  allows you to easily map your HTTP routes to your CRUD(create, read, update, delete) functionality. 
MVC framework is first and foremost, a TON of fun to use. It splits your code into three separate files. 
**Models** control the Logic aspects of the application, **Views** render what the users see while interacting with your app, and **controllers** contain code that interacts with both models and controllers. It passes information to and from, and it's where your RESTful routes live.

**LifeRoute** 

**My Models**

I have 4 models that consist of the following: 

- goal
- habit
- routine
- user 

```
class User < ActiveRecord::Base
 has_secure_password


    has_many :habits, through: :routines
    has_many :goals
    has_many :routines

    validates :name, :email, presence: true
end
```

Here is the User model. There are only a few moving parts here, ActiveRecord and Sinatra take care of a lot methods that are very time consuming to write out manually. 
has_secure_password is used to add methods that authenticate passwords encrypted with "bcrypt" (that gem I mentioned earlier)
The has_many relationship allows you to associate your models and your database. Each model will either have many, belong to, or have many through. Now that your models are associated with each other, their data is much easier to work with.

```
 delete '/goals/:id' do 
        @goal = Goal.find_by_id(params[:id])
        if can_edit_goal(@goal) 
            @goal.destroy 
            redirect '/goals'
        else 
            flash[:error] = "Cannot delete another users goal."
            redirect '/goals'
        end 
        
    end 
```

This is the delete user route, when you fill a form with information can to access it in the controller using "params". It is a hash, so you can even take it a step further and interact with information using key-value pairs like I did setting the instance variable @goal to the return value of  Goal.find_by_id(params[:id]). 
Another great tool that ActiveRecord gives you access to, is helpers! 

```
helpers do 
    def logged_in? 
      !!current_user
    end 
    
    def current_user
      @current_user ||= User.find_by(email: session[:email]) if session[:email]
    end
    
    def can_edit_user(user)
      user.id == session[:user_id]
    end 

    def login(email, password) 

      user = User.find_by(email: email)
      if user && user.authenticate(password)
        session[:email] = user.email
        session[:user_id] = user.id
      else 
        flash[:invalid_login] = "Invalid credentials, try again!"
        redirect '/login'
        
      end 
    end
```

Here are a few of my helper methods, they are re-usable and extremely helpful. Now to see what user is logged in, or see if the current user has permission to edit a user page all I need to do is a quick:

```
@user = current_user 

if can_edit_user(user) 
    erb :'users/edit.html' 
else 
    flash[:error] = "Cannot edit another users page" 
end 
```

This checks to see if the current users id matches the user_id associated with the page they are trying to view
This is a good time for a word or two on Sinatra-flash. It is super easy to use, and allows you to display a message on your page. 
Just like where you see flash[:error] = "" that sets the message, with the key "error". You can have as many flash[:error] variation's living around your app as you want, only one can be shown at a time. 

```
      <% if flash[:invalid_login] %> 
        <h2><%= flash[:invalid_login] %></h2> 
      <% end %> 
      
      <% if flash[:error] %>
        <h2 style="color: red;"><%= flash[:error] %></h2> 
      <% end %> 
      <% if flash[:message] %> 
        <h2><%= flash[:message] %></h2> 
      <% end %>  
```

The above code is located in the layout.erb file. This file is rendered before your normal view files, so this is where you can easily keep your nav-bar and things like these flash messages. 
That way, no-matter what view you are rendering if the user sets off the flash message, it will be shown on the page they are navigating to or are redirected to. 

**Styling**

Styling was a small worry in the back of my head, it was the last step and the one with which I had the least experience. But I found Bulma, and it ended up being great fun to work with. 
When using bulma, you link your app to an external CSS source and you use classes to style html tags. 

```
<div class="hero has-text-centered">           
        <div class="hero-head title">
            <h1><%= @routine.name %></h1>

        </div> 
        <div class="container"> 
            <h4 class="has-text-weight-bold">Your reason</h4>
                <p class="has-text-weight-normal"><%= @routine.why %></p>
            

            <h4 class="has-text-weight-bold">Your time commitment</h4>
                <p class="has-text-weight-normal"><%= @routine.duration %></p>
            

            <hr style="height:1px;border:none;color:#333;background-color:#333;length:60%;" /> 
            <h3 class="title is-4">Habits</h3> 
            <% @routine.habits.each do |h| %> 
                <ul> 
                <li><a class="button is-success is-outlined" href="/habits/<%= h.id %>"><%= h.name %></a></li>
                </ul> 
                

            <% end %>
```

Here is a snippet of  my routine show page. As you can see, it is extremely easy to use Bulma and it only took re-writing a few files to have the hang of the basics. 

**Final Thoughts** 

I had a lot of fun with this project, it feels very rewarding to get to see your code working in the browser. To build an app with a front end, database, and real-world functionality is an extremely rewarding experience. And this is just the beginning, I don't know if there are words to sum up my excitement for working with more new languages. What I do know is there will be some confusion, a lot of early mornings and study, and a mistake or two. Ultimately I will have a new understanding of new tools to be used in my career, and a greater appreciation for the work that goes into the technology used all over the world. 
